<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="650" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="Arial" font-size="24" font-weight="bold" fill="#2E74B5">FMA Data Warehouse - Star Schema</text>
  
  <!-- FACT TABLE (Center) -->
  <g filter="url(#shadow)">
    <rect x="300" y="220" width="300" height="200" rx="8" fill="#FFE082" stroke="#F9A825" stroke-width="2"/>
    <rect x="300" y="220" width="300" height="35" rx="8" fill="#F9A825"/>
    <text x="450" y="245" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">fact_track_performance</text>
    
    <text x="315" y="275" font-family="Courier New" font-size="11" fill="#333">PK  track_id</text>
    <text x="315" y="295" font-family="Courier New" font-size="11" fill="#333">FK  artist_id</text>
    <text x="315" y="315" font-family="Courier New" font-size="11" fill="#666">    track_date_recorded</text>
    <line x1="310" y1="325" x2="590" y2="325" stroke="#E0E0E0" stroke-width="1"/>
    <text x="315" y="345" font-family="Arial" font-size="10" font-style="italic" fill="#666">Measures:</text>
    <text x="315" y="365" font-family="Courier New" font-size="11" fill="#333">    track_listens</text>
    <text x="315" y="385" font-family="Courier New" font-size="11" fill="#333">    danceability</text>
    <text x="315" y="405" font-family="Courier New" font-size="11" fill="#333">    energy, song_hotttnesss</text>
  </g>
  
  <!-- DIM_ARTISTS (Top) -->
  <g filter="url(#shadow)">
    <rect x="325" y="55" width="250" height="130" rx="8" fill="#B3E5FC" stroke="#0288D1" stroke-width="2"/>
    <rect x="325" y="55" width="250" height="30" rx="8" fill="#0288D1"/>
    <text x="450" y="77" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">dim_artists</text>
    
    <text x="340" y="105" font-family="Courier New" font-size="11" fill="#333">PK  artist_id</text>
    <text x="340" y="125" font-family="Courier New" font-size="11" fill="#333">    artist_name</text>
    <text x="340" y="145" font-family="Courier New" font-size="11" fill="#333">    artist_handle</text>
    <text x="340" y="165" font-family="Courier New" font-size="11" fill="#333">    artist_favorites</text>
  </g>
  
  <!-- Connection: dim_artists to fact -->
  <line x1="450" y1="185" x2="450" y2="220" stroke="#666" stroke-width="2"/>
  <polygon points="450,220 445,210 455,210" fill="#666"/>
  
  <!-- DIM_GENRES (Left) -->
  <g filter="url(#shadow)">
    <rect x="30" y="250" width="200" height="120" rx="8" fill="#C8E6C9" stroke="#388E3C" stroke-width="2"/>
    <rect x="30" y="250" width="200" height="30" rx="8" fill="#388E3C"/>
    <text x="130" y="272" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">dim_genres</text>
    
    <text x="45" y="300" font-family="Courier New" font-size="11" fill="#333">PK  genre_id</text>
    <text x="45" y="320" font-family="Courier New" font-size="11" fill="#333">    genre_name</text>
    <text x="45" y="340" font-family="Courier New" font-size="11" fill="#333">FK  parent_id (self-ref)</text>
  </g>
  
  <!-- BRIDGE_TRACK_GENRES (Right) -->
  <g filter="url(#shadow)">
    <rect x="670" y="260" width="200" height="100" rx="8" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="2"/>
    <rect x="670" y="260" width="200" height="30" rx="8" fill="#7B1FA2"/>
    <text x="770" y="282" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">bridge_track_genres</text>
    
    <text x="685" y="310" font-family="Courier New" font-size="11" fill="#333">FK  track_id</text>
    <text x="685" y="330" font-family="Courier New" font-size="11" fill="#333">FK  genre_id</text>
  </g>
  
  <!-- Connection: bridge to fact -->
  <line x1="670" y1="310" x2="600" y2="310" stroke="#666" stroke-width="2"/>
  <polygon points="600,310 610,305 610,315" fill="#666"/>
  
  <!-- Connection: bridge to dim_genres -->
  <path d="M 770 360 L 770 450 L 130 450 L 130 370" stroke="#666" stroke-width="2" fill="none"/>
  <polygon points="130,370 125,380 135,380" fill="#666"/>
  
  <!-- MARTS Section -->
  <rect x="30" y="480" width="840" height="150" rx="8" fill="#FFF3E0" stroke="#FF9800" stroke-width="1" stroke-dasharray="5,5"/>
  <text x="450" y="505" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#E65100">Pre-aggregated Marts (analytics schema)</text>
  
  <!-- mart_genre_profiles -->
  <g filter="url(#shadow)">
    <rect x="50" y="520" width="240" height="90" rx="6" fill="white" stroke="#FF9800" stroke-width="1"/>
    <rect x="50" y="520" width="240" height="25" rx="6" fill="#FF9800"/>
    <text x="170" y="539" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">mart_genre_profiles</text>
    <text x="65" y="560" font-family="Arial" font-size="10" fill="#666">genre_name, track_count</text>
    <text x="65" y="575" font-family="Arial" font-size="10" fill="#666">avg_danceability, avg_energy</text>
    <text x="65" y="595" font-family="Arial" font-size="9" font-style="italic" fill="#999">128 rows</text>
  </g>
  
  <!-- mart_top_artists_yearly -->
  <g filter="url(#shadow)">
    <rect x="330" y="520" width="240" height="90" rx="6" fill="white" stroke="#FF9800" stroke-width="1"/>
    <rect x="330" y="520" width="240" height="25" rx="6" fill="#FF9800"/>
    <text x="450" y="539" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">mart_top_artists_yearly</text>
    <text x="345" y="560" font-family="Arial" font-size="10" fill="#666">artist_name, release_year</text>
    <text x="345" y="575" font-family="Arial" font-size="10" fill="#666">total_listens, rank_in_year</text>
    <text x="345" y="595" font-family="Arial" font-size="9" font-style="italic" fill="#999">1,345 rows</text>
  </g>
  
  <!-- mart_undiscovered_gems -->
  <g filter="url(#shadow)">
    <rect x="610" y="520" width="240" height="90" rx="6" fill="white" stroke="#FF9800" stroke-width="1"/>
    <rect x="610" y="520" width="240" height="25" rx="6" fill="#FF9800"/>
    <text x="730" y="539" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">mart_undiscovered_gems</text>
    <text x="625" y="560" font-family="Arial" font-size="10" fill="#666">track_id, artist_name</text>
    <text x="625" y="575" font-family="Arial" font-size="10" fill="#666">track_listens, song_hotttnesss</text>
    <text x="625" y="595" font-family="Arial" font-size="9" font-style="italic" fill="#999">98 rows</text>
  </g>
  
  <!-- Legend -->
  <rect x="680" y="60" width="190" height="110" rx="5" fill="white" stroke="#E0E0E0" stroke-width="1"/>
  <text x="775" y="80" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="#333">Legend</text>
  <rect x="695" y="92" width="20" height="12" fill="#FFE082" stroke="#F9A825"/>
  <text x="725" y="102" font-family="Arial" font-size="10" fill="#333">Fact Table</text>
  <rect x="695" y="112" width="20" height="12" fill="#B3E5FC" stroke="#0288D1"/>
  <text x="725" y="122" font-family="Arial" font-size="10" fill="#333">Dimension</text>
  <rect x="695" y="132" width="20" height="12" fill="#E1BEE7" stroke="#7B1FA2"/>
  <text x="725" y="142" font-family="Arial" font-size="10" fill="#333">Bridge Table</text>
  <rect x="695" y="152" width="20" height="12" fill="white" stroke="#FF9800"/>
  <text x="725" y="162" font-family="Arial" font-size="10" fill="#333">Mart (Pre-agg)</text>
</svg>
